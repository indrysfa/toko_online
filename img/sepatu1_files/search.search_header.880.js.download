$.namespace("indolotte.front.ec.search.custom_filter_temp");indolotte.front.ec.search.custom_filter_temp={getKeywordRedirection:function(a){for(var b=new Map,c=searchKeywordLanding.split("|"),d=0;d<c.length;d++)for(var e=c[d].split(","),f=0;f<e.length;f++)void 0!==e[0]&&void 0!==e[1]&&b.set(e[0].trim().toLowerCase(),e[1]);a=a.trim().toLowerCase();return b.get(a)}};$.namespace("indolotte.front.ec.search.search_header");
indolotte.front.ec.search.search_header={makeHeader:function(){1>$("#popkeyword_area").children("li").length&&(this.getPopkeyword(),this.getSuddenkeyword(),this.getRecentKeyword(),this.getAds())},getAds:function(){indolotte.common.Ajax.sendJSONRequest("POST",CONSTANTS.baseUrl+"api/common/search/getAds",null,function(a){$.each(a.advertisementWordEVOList,function(a,c){a={targetPageLinkURLAddress:c.targetPageLinkURLAddress,advertisementWordsContent:c.advertisementWordsContent};$("#adsTemplate").tmpl(a).appendTo("#ads_area_01");
$("#adsTemplate").tmpl(a).appendTo("#ads_area_02")})})},getPopkeyword:function(){var a=CONSTANTS.baseUrl+"api/common/search/getPopword",b=this.objToJson($("#popkeywordFrm").serializeArray());indolotte.common.Ajax.sendJSONRequest("POST",a,b,function(a){var b=0;$.each(a.items,function(a,c){b=a+1;a={rank:b,popkeyword:c.query};$("#popkeywordTemplate").tmpl(a).appendTo("#popkeyword_area")})})},getSuddenkeyword:function(){var a=CONSTANTS.baseUrl+"api/common/search/getSuddenKeyword",b=this.objToJson($("#suddenKeywordFrm").serializeArray());
indolotte.common.Ajax.sendJSONRequest("POST",a,b,function(a){var b=1,c="",f="",g="",h="";$.each(a.word,function(a,d){if(10<b)return!1;"n"==d.changes?(c="txt_rank new",f="NEW",g="ico_rank_up",h=""):"u"==d.changes?(c="txt_rank",f=d.count,g="ico_rank_up",h="Up"):"d"==d.changes&&(c="txt_rank",f=d.count,g="ico_rank_down",h="Down");a={txtClass:c,txtVal:f,rankClass:g,rankVal:h,suddenKeyword:d.content,rank:b};$("#suddenKeywordTemplate").tmpl(a).appendTo("#suddenkeyword_area");b++})})},xssFilter:function(a){var b=
a.indexOf("javascript:/--\x3e");-1!==b&&(console.error("Unusual code is found!"),a=a.slice(0,b));$("#headerQuery").val(a);return a},doHeaderSearch:function(){var a=$("#headerQuery").val(),b=indolotte.front.ec.search.custom_filter_temp.getKeywordRedirection(a);void 0!==b?location.href=b:1>indolotte.front.ec.search.search_header.trim(a).length||null==a?$("#headerQuery").focus():(localStorage.removeItem("/se/search"),this.xssFilter(a),$("#searchHeaderForm").submit())},doKeywordSearch:function(a){localStorage.removeItem("/se/search");
this.xssFilter(a);$("#searchHeaderForm").submit()},getCookie:function(a){var b,c,d,e=document.cookie.split(";");for(b=0;b<e.length;b++)if(c=e[b].substr(0,e[b].indexOf("\x3d")),d=e[b].substr(e[b].indexOf("\x3d")+1),c=c.replace(/^\s+|\s+$/g,""),c==a)return unescape(d)},setCookie:function(a,b,c){var d=new Date;d.setDate(d.getDate()+c);b=escape(b)+(null==c?"":"; expires\x3d"+d.toUTCString()+"; path\x3d/");document.cookie=a+"\x3d"+b},getMyKeyword:function(a,b){var c=this.getCookie("mykeyword");null==c&&
(c="");var d=c.split("^%"),e=[],f=new Date,c=f.getMonth()+1;10>c&&(c="0"+c);f=f.getDate();10>f&&(f="0"+f);f=f+"."+c;if(0<b&&""!=a){for(b=0;b<d.length;b++)c=d[b].split("@")[0],d[b].split("@"),c!=a&&e.push(d[b]);e.push(a+"@"+f);11==e.length&&(e=e.slice(1,11));this.setCookie("mykeyword",e.join("^%"),365);this.showMyKeyword(e.reverse())}else this.showMyKeyword(d.reverse())},removeMyKeyword:function(a,b){var c=this.getCookie("mykeyword");null==c&&(c="");for(var c=c.split("^%"),d=0;d<c.length;)c[d]==b?
c.splice(d,1):d++;this.setCookie("mykeyword",c.join("^%"),365);a.stopPropagation();this.showMyKeyword(c.reverse())},removeAllMyKeyword:function(){var a=[];this.setCookie("mykeyword",a.join("^%"),365);this.showMyKeyword(a)},getRecentKeyword:function(){var a=this.getCookie("mykeyword");null==a&&(a="");a=a.split("^%");this.showMyKeyword(a.reverse())},showMyKeyword:function(a){var b=0;$("#mykeyword_area").empty();for(var c=0;c<a.length;c++)if(""!=a[c]){var d=a[c].split("@")[0],e=a[c].split("@")[1],d=
{query:d.replace("'","\\'"),mykeyword:d,mykeywordDt:e,myKeywordFull:a[c]};b++;$("#myKeywordTemplate").tmpl(d).appendTo("#mykeyword_area")}0==b&&$("#myKeywordDefaultTemplate").tmpl().appendTo("#mykeyword_area")},pressCheckHeader:function(a){return 13==a.keyCode?(a.preventDefault(),this.doHeaderSearch()):!1},objToJson:function(a){var b={};$.each(a,function(a,d){b[d.name]=d.value});return b},filteringXSS:function(a,b){void 0==b||0==b?a=a.replace(/\<|\>|\"|\'|\%|\;|\(|\)|\&|\+|\-/g,""):void 0!=b&&1==
b&&(a=a.replace(/\</g,"\x26lt;"),a=a.replace(/\>/g,"\x26gt;"));return a},trim:function(a){return a.replace(/^\s+|\s+$/g,"")}};